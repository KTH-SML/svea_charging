<?xml version="1.0"?>
<launch>
    <!-- Launch file arguments -->
    <arg name="map"             default="sml"/>
    <arg name="is_sim"          default="true"/>
    <arg name="use_foxglove"    default="true"/>
    <arg name="initial_pose_x"  default="-3.0"/> <!-- changed-->
    <arg name="initial_pose_y"  default="0.0"/> <!-- changed-->
    <arg name="initial_pose_a"  default="0.0" /> <!-- wrt to map--> <!-- changed-->
    <arg name="map_path" default="$(find-pkg-share svea_core)/maps/$(var map).yaml"/>
    <arg name="state" default="[-7.4, -15.3, 0.9, 0.0]" /> <!-- should be changed-->

    <!-- Start Map Server and Foxglove -->
    <include file="$(find-pkg-share svea_core)/launch/map_and_foxglove.xml">
        <arg name="map" value="$(var map)" />
        <arg name="use_foxglove" value="$(var use_foxglove)" />
    </include>   
    
    <!-- Start Svea Core -->
    <include file="$(find-pkg-share svea_core)/launch/svea_mocap.xml">
        <arg name="is_sim" value="$(var is_sim)" />
        <arg name="initial_pose_x" value="$(var initial_pose_x)" />
        <arg name="initial_pose_y" value="$(var initial_pose_y)" />
        <arg name="initial_pose_a" value="$(var initial_pose_a)" />
        <arg name="state" value="$(var state)" />
        <arg name="map" value="$(var map)" />
    </include>   

    <push-ros-namespace namespace="self"/>

    <!-- Start stanleyController -->
    <node name="stanleyExecutable" pkg="svea_charging" exec="stanleyExecutable.py" output="screen">
        <param name="use_rviz" value="$(var use_foxglove)"/>
        <param name="is_sim" value="$(var is_sim)"/>

        <remap from="/lli/ctrl/steering" to="/self/lli/ctrl/steering"/>
        <remap from="/lli/ctrl/throttle" to="/self/lli/ctrl/throttle"/>
        <remap from="/lli/ctrl/highgear" to="/self/lli/ctrl/highgear"/>
        <remap from="/lli/ctrl/diff" to="/self/lli/ctrl/diff"/>
    </node>

</launch>
